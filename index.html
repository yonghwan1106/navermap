<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <title>네이버 맵 API v3 테스트 - 경기도 상권정보</title>
    
    <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=11pz3tdpch"></script>
    
    <style type="text/css">
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }
        #map {
            width: 100%;
            height: 500px; /* 지도의 높이 설정 */
            /* 배경색을 추가하여 지도가 로드되기 전에도 영역을 시각적으로 구분할 수 있도록 합니다. */
            background-color: #f0f0f0; 
        }
    </style>
</head>
<body>
    <div id="map"></div>

    <script>
        // 인증 실패 시 호출될 함수 (선택 사항이지만 디버깅에 매우 유용)
        window.navermap_authFailure = function () {
            console.error("네이버 지도 API 인증에 실패했습니다. 클라이언트 ID 또는 서비스 URL 설정을 확인해주세요.");
            alert("지도 로딩에 실패했습니다. 관리자에게 문의해주세요.");
            // 여기에 사용자에게 보여줄 메시지나 다른 처리 로직을 추가할 수 있습니다.
        };

        // 지도를 생성하는 함수
        function initMap() {
            var mapOptions = {
                // 경기도 용인시의 중심 좌표 (예시)
                center: new naver.maps.LatLng(37.24108, 127.17795), 
                zoom: 12 // 초기 줌 레벨
            };

            var map = new naver.maps.Map('map', mapOptions);
            console.log("네이버 지도가 성공적으로 로드되었습니다!");
        }

        // 비동기 로드를 위한 콜백 함수 지정 방식 사용 (PDF 문서 참조)
        // 네이버 지도 API v3은 준비되면 지정한 콜백 함수를 호출합니다. [cite: 10]
        // script src의 URL을 변경해야 합니다.
        // 현재는 동기 방식으로 사용하고 있으므로, initMap 함수를 직접 호출하지 않습니다.
        // 스크립트 로드가 완료되면 자동으로 `naver.maps` 객체가 사용 가능해집니다.
        // 하지만 보다 안정적인 로딩을 위해 PDF에서 권장하는 비동기 콜백 방식이 좋습니다.
        
        // --- 동기 방식 대신 비동기 콜백 방식 사용을 위한 수정 (권장) ---
        // 아래 코드를 복사하여 사용하는 대신, 위 <script> 태그를 아래와 같이 수정하세요.
        /*
        <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=11pz3tdpch&callback=initMap"></script>
        */
        // 이 경우, <body> 안의 <script> 태그는 initMap 함수 정의만 남기고,
        // map 변수 선언 및 지도 생성 부분은 initMap 함수 안으로 들어가야 합니다.
        // (현재 코드에서는 이미 그렇게 되어 있습니다.)
        
        // 현재 코드는 <script> 태그가 head에 있고, body 내부 스크립트에서 바로 naver 객체를 사용합니다.
        // 이는 보통 잘 작동하지만, 네트워크 지연이 있을 경우 오류가 발생할 수 있습니다.
        // PDF 문서에서 권장하는 비동기 방식 (callback 파라미터 사용)을 적용하는 것이 더 안정적입니다.
        // 따라서, 현재 코드에서는 `initMap()`을 명시적으로 호출하지 않습니다. 
        // HTML 문서의 `<script>` 태그를 변경하여 비동기 콜백 방식을 적용해야 합니다.
    </script>
</body>
</html>
